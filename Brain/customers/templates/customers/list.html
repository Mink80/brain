{% extends "base.html" %}
{% block content %}

<div class="w-100 p-5 small mx-auto">
  <h5>Customers</h5>

  {% include "flash_message.html" %}

  <br>

  <div class="w-75 mx-auto">

    <table class="table table-hover">
      <thead class="thead-light">
        <tr>
          <th scope="col" style="width: 30%">Name</th>
          <th scope="col" style="width: 60%">Comment</th>
          <th scope="col" style="width: 5%">Projects</th>
          <th scope="col" style="width: 5%">Action</th>
        </tr>
      </thead>
      <tbody>
        {% for c in customers %}
        <tr>
          <td>{{c.name}}</td>
          <td>
            {% if c.comment != "" %}
              {{c.comment}}
            {% else %}
              -
            {% endif %}
            </td>
          <td>{{c.projects.count()}}</td>
          <td class="text-center">
            <a href="{{url_for('customers.delete', customer_id=c.id)}}">
              <img src="{{url_for('static', filename='trash.png')}}" width="16" height="16">
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <h6>Add a new Customer:</h6>
    <form method="POST">
      {{ form.hidden_tag() }}
      <table class="w-100">
        <tr>
          <td scope="col" style="width: 30%">
            {{ form.name(class="form-control form-control-sm", autocomplete="off") }}
          </td>
          <td scope="col" style="width: 70%">
            {{ form.comment(class="form-control form-control-sm", autocomplete="off") }}
          </td>
        </tr>
      </table>

      {% include "flash_error_message.html" %}

      {{ form.submit(class="form-control form-control-sm btn btn-outline-primary w-100") }}
    </form>
  </div>
</div>

{% endblock %}
