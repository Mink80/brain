{% extends "base.html" %}

{% block content %}

<br>

<div class="card-body">
      <h5 class"text-primary">Edit Task</h5>
</div>

<div class="w-100 p-5  small mx-auto">
    <form method="POST">
      {{ form.hidden_tag() }}

      <table class="table">
        <thead>
          <tr>
            <th scope="col" style="width: 10%">Customer</th>
            <th scope="col" style="width: 15%">Project</th>
            <th scope="col" style="width: 40%">Text</th>
            <th scope="col" style="width: 10%">Type</th>
            <th scope="col" style="width: 12%">DueDate</th>
            <th scope="col" style="width: 10%">Weekly</th>
            <th scope="col" style="width: 3%">Action</th>
          </tr>
        </thead>
        <tbody>
          {% for t in tasks %}
            {% if t.id|int == edit_id|int %}

            <tr bgcolor="{{t.bgcolor()}}">
              <td>{{ form.customer(class="form-control form-control-sm") }}</td>
              <td>{{ form.project(class="form-control form-control-sm") }}</td>
              <td>{{ form.text(class="form-control form-control-sm") }}</td>
              <td>{{ form.type(class="form-control form-control-sm") }}</td>
              <td>{{ form.duedate(class="form-control form-control-sm dp", size="10") }}</td>
              <td>{{ form.weekly(class="form-control form-control-sm") }}</td>
              <td>{{ form.submit(class="form-control form-control-sm btn btn-outline-primary") }}</td>
            </tr>


            {% else %}

              <tr bgcolor="{{t.bgcolor()}}">
                <td>
                  {{ t.customer_name() }}
                  </td>
                  <td>
                    {{ t.project_name() }}
                  </td>
                <td>{{t.text}}</td>
                <td>{{t.type.name}}</td>
                <td>
                  {% if t.duedate %}
                    {{t.duedate}}
                  {% else %}
                    None
                  {% endif %}
                <td>{{t.weekly.name}}</td>
                <td class="text-center">
                  &nbsp;
                </td>
              </tr>

            {% endif %}

          {% endfor %}
        </tbody>
      </table>
    </form>

    {% if form.errors %}
      <br><br>
        {% for field in form %}
            {% for error in field.errors %}
                <div class="alert alert-danger alert-dismissible fade show text-center">
                  {{ error|escape }}
                    <button type="button" class="close align-middle" data-dismiss="alert" aria-label="Close" class="fade close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            {% endfor %}
        {% endfor %}
    {% endif %}


    <!-- Date picker stuff ->>
    <!-- coole themes: base, flick, redmond -->
    {{ datepicker.loader(theme="flick") }} {# to load jQuery-ui #}
    {{ datepicker.picker(id=".dp") }}
    <!-- --- -->

    {% include "dynamic_project_selector.html" %}    

</div>

<br>

{% endblock %}
